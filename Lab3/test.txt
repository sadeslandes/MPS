void main(void)
{
	SFRPAGE = CONFIG_PAGE;
	
	Port_Init();				// Configure the Crossbar and GPIO.
	UART_Init();				// Initialize UART0.
	Timer_Init();				//UART0 users Timer2 adn UART1 uses Timer 1
	SYSCLK_Init(); 				// 22.1884 with PLL of 9/4

	while (1)
	{
		SFRPAGE = UART0_PAGE;
		  		

		if(RI0)
		{
			ES0=1; 
			printf("%c \r\n", choice); 
			
			SFRPAGE = UART1_PAGE; 
			printf("%c \r\n", choice); 
			//while(!T10); 
		}

		SFRPAGE = UART1_PAGE; 

		if(RI1)
		{
			ES0 =0; 
			//ES1 =1;
			EIE2 = 0x40;  //jump to UART1 ISR  
			printf("%c \r\n", choice); 

			SFRPAGE = UART0_PAGE;
			printf("%c \r\n", choice); 
		} 


		
	}
}

//-------------------------------------------------------------------------------------------
// UART0 ISR
//-------------------------------------------------------------------------------------------
//

void UART0_ISR(void)__interrupt 4
{
	if(RI0)
	{
		while(!TI0); 
		 
		choice = SBUF0;
		ES0=0; 
		RI0=0;	
		EIE2 |= 0x40;
		//printf("testing \r\n");
		
	} 
}


//-------------------------------------------------------------------------------------------
// UART1 ISR
//-------------------------------------------------------------------------------------------
//

void UART1_ISR(void)__interrupt 20
{
	if(RI1)
	{
		while(!TI1);
		  
		choice = SBUF1; 
		EIE2 &= ~0x40;
		RI1=0;
		//printf("testing UART1 page \r\n");
		 
	}
}
